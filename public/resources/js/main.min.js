!function(t,i,n,e){"use strict";function a(){var t=o.get(Math.floor(Math.random()*o.length));t.currentTime=0,t.play()}var o,c=function(i,n){this.imageURL=void 0,this.clickCount=0,this.catClicker=i,this.$imageContainer=c.$thumbnailCache.clone().data("Cat",this).on("click",c.imageContainerOnClick),this.$image=t(".image",this.$imageContainer),this.$resetButton=t(".reset-button",this.$imageContainer).on("click",c.resetButtonOnClick).on("mousedown mouseup",function(t){t.stopPropagation()}),this.initialize(n)};c.$thumbnailCache=t('<div class="thumbnail image-container">\n    <div class="image-wrapper">\n        <div class="image"></div>\n    </div>\n    <div class="fa fa-repeat reset-button"></div>\n</div>'),c.getImage=function(t,i){var n=new XMLHttpRequest;n.onerror=i,n.onreadystatechange=function(){if(n.readyState===XMLHttpRequest.DONE&&200===n.status){var i=window.URL||window.webkitURL;t(i.createObjectURL(n.response))}},n.responseType="blob",n.open("GET","https://thecatapi.com/api/images/get?api_key=MTgyMTA2&format=src&category=dream"),n.send()},c.imageContainerOnClick=function(){var i=t(this).data("Cat");i.catClicker.setCat(i)},c.resetButtonOnClick=function(){var i=t(this).parent().data("Cat");event.stopPropagation(),i.$resetButton.hasClass("loading")||i.initialize()},c.prototype.initialize=function(i){var n=this;n.imageURL=void 0,n.clickCount=0;var e=n.$resetButton.addClass("loading"),a=n.$image;c.getImage(function(o){n.imageURL=o,a.css("background-image","url("+o+")"),e.removeClass("loading"),t.isFunction(i)&&i(n)},function(){alert("An error occurred while fetching a cure Cat image!\nRetrying..."),n.initialize(i)})};var r=function(i){this.$imageContainer=r.$imageContainerCache.clone().data("CatClicker",this).on("click",r.imageContainerOnClick),this.$image=t(".image",this.$imageContainer),this.$resetButton=t(".reset-button",this.$imageContainer).on("click",r.resetButtonOnClick).on("mousedown mouseup",function(t){t.stopPropagation()}),this.$clickCount=t(".click-count",this.$imageContainer),this.onClick=t.isFunction(i)?i:t.noop,this.cat=void 0};r.$imageContainerCache=t('<div class="image-container">\n    <div class="image-wrapper">\n        <div class="image"></div>\n    </div>\n    <div class="fa fa-repeat reset-button"></div>\n    <div class="click-count">0</div>\n</div>\n'),r.imageContainerOnClick=function(){var i=t(this).data("CatClicker");i.cat.clickCount++,i.render(),i.onClick()},r.resetButtonOnClick=function(i){var n=t(this).parent().data("CatClicker");i.stopPropagation(),n.cat.clickCount=0,n.render()},r.prototype.setCat=function(t){var i=this;i.cat=t,i.render()},r.prototype.render=function(){var t=this;t.$clickCount.text(t.cat.clickCount),t.$image.css("background-image","url("+t.cat.imageURL+")")},t(function(){o=t(".click-sound",n),o.each(function(t){o.get(t).volume=.2});var i=new r(a),e=[new c(i,function(t){t.$imageContainer.trigger("click")}),new c(i),new c(i),new c(i),new c(i)];t("#cat-thumbnail-container",n).append(e.map(function(t){return t.$imageContainer})),t("#cat-container",n).append(i.$imageContainer)})}(jQuery,window,document);
