!function(e,t,o){"use strict";function n(){alert("An error occurred while fetching a cure Cat image!\nRetrying in 5 seconds...")}function a(e){e.lengthComputable&&f.text(Math.round(e.loaded/e.total*100)+"%")}function s(){if(!p.hasClass("loading")){p.addClass("loading"),f.addClass("show");var e=new XMLHttpRequest;e.onprogress=a,e.onerror=n,e.onreadystatechange=function(){if(e.readyState===XMLHttpRequest.DONE&&200===e.status){var t=window.URL||window.webkitURL;g.css("background-image","url("+t.createObjectURL(e.response)+")"),d.text(h=0),p.removeClass("loading"),f.removeClass("show").text("0%")}},e.open("GET","http://thecatapi.com/api/images/get?api_key=MTgyMTA2&format=src&category=dream"),e.responseType="blob",e.send()}}function i(e){e.currentTime=0,e.play()}function c(){l.addClass("clicked"),d.addClass("image-clicked"),d.text(++h),i(m.get(Math.floor(Math.random()*m.length)))}function r(){l.removeClass("clicked"),d.removeClass("image-clicked")}function u(e){e.stopPropagation(),s()}var d,l,g,m,p,f,h=0;e(function(){m=e(".click-sound",o),m.each(function(e){m.get(e).volume=.2}),l=e("#image-container",o).on("mousedown",c).on("mouseup",r),g=e("#image",l),d=e("#click-count",l),p=e("#restart-button",l).on("click",u).on("mousedown mouseup",function(e){e.stopPropagation()}),f=e("#loading-percentage",l),s()})}(jQuery,window,document);
