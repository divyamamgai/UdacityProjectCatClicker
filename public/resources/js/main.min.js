!function(t,i,n,a){"use strict";function e(){var t=o.get(Math.floor(Math.random()*o.length));t.currentTime=0,t.play()}var o,c=function(i){this.$imageContainer=c.$imageContainerCache.clone().data("Cat",this).on("click",c.imageContainerOnClick),this.$image=t(".image",this.$imageContainer),this.$resetButton=t(".reset-button",this.$imageContainer).on("click",c.resetButtonOnClick).on("mousedown mouseup",function(t){t.stopPropagation()}),this.$clickCount=t(".click-count",this.$imageContainer),this.clickCount=0,this.onClick=t.isFunction(i)?i:t.noop,this.initialize()};c.$imageContainerCache=t('<div class="image-container">\n    <div class="image-wrapper">\n        <div class="image"></div>\n    </div>\n    <div class="fa fa-repeat reset-button"></div>\n    <div class="click-count">0</div>\n</div>\n'),c.imageContainerOnClick=function(){var i=t(this).data("Cat");i.$clickCount.addClass("image-clicked").text(++i.clickCount),i.onClick()},c.resetButtonOnClick=function(i){var n=t(this).parent().data("Cat");i.stopPropagation(),n.$resetButton.hasClass("loading")||n.initialize()},c.getImage=function(t,i){var n=new XMLHttpRequest;n.onerror=i,n.onreadystatechange=function(){if(n.readyState===XMLHttpRequest.DONE&&200===n.status){var i=window.URL||window.webkitURL;t(i.createObjectURL(n.response))}},n.responseType="blob",n.open("GET","https://thecatapi.com/api/images/get?api_key=MTgyMTA2&format=src&category=dream"),n.send()},c.prototype.initialize=function(){var t=this;t.clickCount=0,t.$clickCount.text("0")};var s=function(i){this.imageURL=void 0,this.cat=i,this.$thumbnail=s.$thumbnailCache.clone().data("CatThumbnail",this).on("click",s.imageContainerOnClick),this.$image=t(".image",this.$thumbnail),this.$resetButton=t(".reset-button",this.$thumbnail).on("click",s.resetButtonOnClick).on("mousedown mouseup",function(t){t.stopPropagation()}),this.initialize()};s.imageContainerOnClick=function(){var i=t(this).data("CatThumbnail");i.cat.$image.css("background-image","url("+i.imageURL+")")},s.resetButtonOnClick=function(){var i=t(this).parent().data("CatThumbnail");event.stopPropagation(),i.$resetButton.hasClass("loading")||i.initialize()},s.prototype.initialize=function(){var t=this,i=t.$resetButton.addClass("loading"),n=t.$image;c.getImage(function(a){t.imageURL=a,n.css("background-image","url("+a+")"),i.removeClass("loading")},function(){alert("An error occurred while fetching a cure Cat image!\nRetrying..."),t.initialize()})},s.$thumbnailCache=t('<div class="thumbnail image-container">\n    <div class="image-wrapper">\n        <div class="image"></div>\n    </div>\n    <div class="fa fa-repeat reset-button"></div>\n</div>'),t(function(){o=t(".click-sound",n),o.each(function(t){o.get(t).volume=.2});var i=new c(e),a=[new s(i),new s(i),new s(i),new s(i),new s(i)];t("#cat-thumbnail-container",n).append(a.map(function(t){return t.$thumbnail})),t("#cat-container",n).append(i.$imageContainer)})}(jQuery,window,document);
